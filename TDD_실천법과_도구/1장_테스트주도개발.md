## CHAPTER 1 테스트 주도 개발


### 1.1 흔하디흔한 소프트웨어 개발 방식
- 고전적인 개발 방식
    - [ 문제 발생 ] → [ 기능 구현 ] → [ 검증 ]
      - 고전적이면서 대표적인 검증 방법 : 콘솔 화면에 값 찍기

### 1.2 테스트 주도 개발(Test-Driven Development, TDD)
- 정의 : 프로그램을 작성하기 전에 테스트를 먼저 작성하는 것 ( 즉, 어부 코드를 작성하기 전에 테스트 코드를 먼저 만드는 것)
- 명시적인 코드로 개발 종료 조건을 정해놓은 것

### 1.3 테스트 주도 개발의 목표
- 목표 : 잘 동작하는 깔끔한 코드(Clean code that works)

### 1.4 테스트 주도 개발의 기원
- 애자일 개발 방식 중 하나인 XP(eXtreme Programming)의 실천 방식 중 하나
- XP 목표) 단순성, 상호소통, 피드백, 용기 등의 원칙에 기반해 고객에게 최고의 가치를 최대한 빨리 전달하는 것
- XP 실천 방법) TDD, 짝 프로그래밍, 일일 빌드, 지속적인 통합 등

### 1.5 개발에 있어 테스트 주도 개발의 위치
- 개발자가 자신을 위해 처음으로 수행하는 테스트
- TDD 단위 테스트) 메소드 단위의 테스트를 뜻한다.

### 1.6 테스트 주도 개발의 진행 방식
- '질문 → 응답 → 정제' 세 단계가 반복적으로 이루어진다.
- 질문(Ask): 테스트 작성을 통해 시스템에 질문한다. (테스트 수행 결과는 실패)
- 응답(Respond): 테스트를 통과하는 코드를 작성해서 질문에 대답한다. (테스트 성공)
- 정제(Refine): 아이디어를 통합하고, 불필요한 것은 제거하고, 모호한 것은 명확히 해서 대답을 정제한다. (리팩토링)
- 반복(Repeat): 다음 질문을 통해 대화를 계속 진행한다.

### 1.7 실습 먼저 시작해보기
- 작성하고자 하는 메소드나 기능이 무엇인지 선별하고 작성 완료 조건을 정해서 실패하는 테스트 케이스 작성하기
- 목표 이미지를 미리 세운다 → 자동화된 테스트 케이스를 작성한다. → 만족시키는 로직을 작성하고 정련한다.

1. TDD에서는 테스트의 최소 작성 단위를 최하위 모듈의 단위와 일치시킨다.
       - Java 언어 기준 최하위 모듈은 '메소드'

2. 클래스 구현 두 가지 접근 방식
    - 첫 번째, 구현 대상 클래스의 외형에 해당하는 메소드들을 먼저 만들고 테스트 케이스를 일괄적으로 만드는 방식
    - 두 번째, 테스트 케이스를 하나씩 추가해나가면서 구현 클래스를 점진적으로 만드는 방식

3. 소스 정제
    - 리팩토링 작업 수행(즉, 동작하는 코드를 수정해서 사람이 좀 더 이해하기 쉽고 변경하기 용이한 구조로 소스 코드를 개선하는 작업)
    - 리팩토링 수행을 위한 질문
Q1. 소스의 가독성이 적절한가?
Q2. 중복된 코드는 없는가?
Q3. 이름이 잘못 부여된 메소드나 변수명은 없는가?
Q4. 구조의 개선이 필요한 부분이 없는가?

#### ※ JUnit 테스트 프레임워크
- 단위 테스트 프레임워크 중 하나
- 문자 혹은 GUI 기반으로 실행
- 결과는 성공(녹색), 실패(붉은색) 중 하나로 표시

1. @Test
       - 메소드를 테스트 메소드로 지정하기 위한 애노테이션

2. fail()
       - fali 메소드가 호출되면 해당 테스트 케이스는 그 순간 무조건 실패한다.

3. assertEquals()
       -  assertEquals(예상값, 실제값)
           -  assertEquals("설명", 예상값, 실제값)

4. @Before
       - @test로 표시된 테스트 케이스가 실행되기 전에 먼저 실행된다.
           - 메소드 선언부의 접근자는 public으로 선언되어야 한다.


### 1.8 TDD의 장점 
1. 개발의 방향을 잃지 않게 유지해준다.
       -  TDD를 진행할 때 만들어지는 테스트 케이스들은, 자신이 어디까지 왔고, 앞으로 나아가야 하는 곳이 어디인지를 알려주는 나침반이 된다.

2. 품질 높은 소프트웨어 모듈 보유
       - TDD를 통해 만들어진 애플리케이션은 필요한 만큼 테스트를 거친 ‘품질이 검증된 부품’을 갖게 되는 것과 마찬가지다.

3. 자동화된 단위 테스트 케이스를 갖게 된다.
       - 자동화된 단위 테스트 케이스들은 개발자가 필요한 시점에 언제든지 수행해볼 수 있다. 그리고 그 즉시 현재까지 작성된 시스템에 대한 이상 유무를 바로 확인할 수 있다. 

4. 사용 설명서 & 의사소통의 수단
       -  TDD를 통해 작성된 테스트 케이스는 사용 설명서이자, 그와 동시에 다른 개발자와 소통하는 커뮤니케이션 통로가 된다.

5. 설계 개선
       -  TDD를 진행해나가면서, 테스트가 가능하도록 설계 구조를 고민하다 보면 자연스럽게 디자인을 개선하게 된다. 

6. 보다 자주 성공한다.
       - 기본적으로, TDD는 매 주기(cycle)를 짧게 설정하도록 권장한다. 테스트를 통과하면 녹색 막대를 자주 볼 수 있고 그때마다 목표를 이뤘다는 성취감을 느낄 수 있다.

#### ※ 엉클 밥(로버트 마틴의 별명)의 TDD 원칙
1. 실패하는 테스트를 작성하기 전에는 절대로 제품 코드를 작성하지 않는다. 
2. 실패하는 테스트 코드를 한 번에 하나 이상 작성하지 않는다. 
3. 현재 실패하고 있는 테스트를 통과하기에 충분한 정도를 넘어서는 제품 코드를 작성하지 않는다.



***

📝 코드베이스(codebase) : 제품 개발에 사용되는 기반 소스 코드들을 지칭. 저장소의 의미도 일부 포함.

📝 애자일 개발 : 민첩하고 유연하게 개발에 임하는 것, 전통적인 개발 방법론처럼 문서와 프로세스 같은 부가적인 부분에 집중하는 것이 아니라 개발 그 자체에 집중할 수 있도록 개발 환경을 조성하는 것을 말한다.

📝 올 그린 : 테스트 케이스 기준 소스 코드가 모든 테스트를 정상으로 통과하면 현재 시스템이 건강하다고 판단하는데 이를 '올 그린 상태'라고 한다.

📝 픽스처(fixture) : 테스트에 사용할 자원이나 객체들을 준비해놓은 부분, JUnit 4버전 : Before와 After